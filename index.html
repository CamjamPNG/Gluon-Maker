<html>
   <head>
      <style>
         body {
            font-family: 'Pretendard', sans-serif;
         }

         input[type="text"], input[type="url"] {
            padding: 12px;
            border: 2px solid #ccc;
            border-radius: 10px;
            margin-bottom: 8px;
            width: 100%;
            box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.3);
         }

         input[type="button"] {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.3);
         }

         #display {
            border: 2px solid #ccc;
            padding: 18px;
            margin-bottom: 16px;
            box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.3);
         }
      </style>
      <script>
		function chatbox(){
  		 var url1 = document.getElementById("url1").value;
  		 if (!url1.startsWith("https://")) {
			url1 = "https://" + url1;
		  }
  		 var oldname = document.getElementById("oldname").value;
  		 var newname = document.getElementById("newname").value;
  		 var text = `import * as Gluon from '@gluon-framework/gluon';
Gluon.open('${url1}', {
  onLoad: () => {
    setTimeout(() => {
      document.title = '${newname}';
      Object.defineProperty(document, 'title', {
        get() {
          return this._title;
        },
        set(original) {
          if (original === '${oldname}') original = '${newname}';
          // web style title -> desktop style title
          this._title = original.replace('${oldname} | ', '');
          if (this._title !== '${newname}') this._title += ' - ${newname}';
          document.getElementsByTagName('title')[0].textContent = this._title; // actually set title
          return this._title;
        }
      });
      document.head.appendChild(document.createElement("style")).innerHTML = \`
.socialLinks-3ywLUf + .info-3pQQBb {
  position: relative;
}
.socialLinks-3ywLUf + .info-3pQQBb::after {
  content: '${newname} 0.1.1 \\a Gluon \${Gluon.versions.gluon} \${Gluon.versions.builder !== 'nothing' ? \`(\${Gluon.versions.builder})\` : ''} \\a \${Gluon.versions.browserType[0].toUpperCase() + Gluon.versions.browserType.slice(1)} \${Gluon.versions.browser} (\${Gluon.versions.product}) \\a Node \${Gluon.versions.node}';
  white-space: pre-wrap;
  text-transform: none;
  color: var(--text-muted);
  font-weight: 400;
  font-family: 'Pretendar', sans-serif;
  font-size: 14px;
  line-height: 18px;
  width: 100%;
  padding: 12px 0;
  margin: 12px 0;
  display: inline-block;
  border-top: 2px solid var(--background-modifier-accent);
}\`;
    }, 200);
  }
});`;
  		 document.getElementById("display").innerHTML = text;
         }
      </script>
   </head>
   <body>
      <h1 style="font-size: 2em;">Chatbox Generator</h1>
      <p>This website provides a simple way to generate code for <a href="https://github.com/gluon-framework/gluon">Gluon</a> JSON file.</p>
      <form>
         <!-- Add labels for the input fields -->
         <input type="text" id="text" size="50" value="" readonly="" style="display: none;">
         <label for="url1">URL1:</label><br>
         <input type="url" id="url1"><br><br>
         <input type="text" id="oldname" style="display: none;"><br><br>
         <label for="newname">Tab Name:</label><br>
         <input type="text" id="newname"><br><br>
         <input type="button" value="Fill in text" onclick="chatbox()"><br><br>
      </form>
      <label for="display">JSON File code:</label><br>
      <div id="display" style="white-space:pre-wrap;"></div>
      <p>Creator: <a href="https://twitter.com/camjampng">Camjampng</a>. Here is the <a href="https://github.com/CamjamPNG/Gluon-Maker">Source Code.</a></p>
   </body>
</html>
